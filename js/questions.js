/**
 * Guardiãs das Águas - Quiz Questions Database
 * Educational questions about water resources, sanitation, and sustainability
 */

window.QuizQuestions = {
    facil: [
        {
            category: "Água e Vida",
            question: "Qual porcentagem do planeta Terra é coberta por água?",
            options: [
                "Aproximadamente 50%",
                "Aproximadamente 71%",
                "Aproximadamente 85%",
                "Aproximadamente 95%"
            ],
            correct: 1,
            explanation: "Cerca de 71% da superfície terrestre é coberta por água, sendo a maior parte água salgada dos oceanos."
        },
        {
            category: "Consumo Consciente",
            question: "Qual é a quantidade média de água que uma pessoa deve consumir por dia?",
            options: [
                "1 litro",
                "2 litros",
                "4 litros",
                "6 litros"
            ],
            correct: 1,
            explanation: "A recomendação geral é de aproximadamente 2 litros de água por dia, podendo variar conforme idade, peso e atividade física."
        },
        {
            category: "Saneamento Básico",
            question: "O que é saneamento básico?",
            options: [
                "Apenas o tratamento de água",
                "Apenas a coleta de lixo",
                "Conjunto de serviços de água, esgoto, limpeza urbana e drenagem",
                "Apenas a construção de banheiros"
            ],
            correct: 2,
            explanation: "Saneamento básico engloba abastecimento de água, esgotamento sanitário, limpeza urbana, manejo de resíduos sólidos e drenagem urbana."
        },
        {
            category: "Ciclo da Água",
            question: "Qual é a principal fonte de energia que move o ciclo da água?",
            options: [
                "O vento",
                "O Sol",
                "A gravidade",
                "A lua"
            ],
            correct: 1,
            explanation: "O Sol é a principal fonte de energia do ciclo da água, fornecendo calor para a evaporação e movimentação das massas de ar."
        },
        {
            category: "Economia Doméstica",
            question: "Qual atividade doméstica consome mais água?",
            options: [
                "Cozinhar",
                "Beber",
                "Tomar banho",
                "Escovar os dentes"
            ],
            correct: 2,
            explanation: "O banho é uma das atividades que mais consome água no uso doméstico, podendo usar entre 95 a 180 litros por banho de 15 minutos."
        },
        {
            category: "Preservação",
            question: "Qual é a melhor forma de economizar água ao escovar os dentes?",
            options: [
                "Escovar apenas uma vez por dia",
                "Usar pasta de dente em pequena quantidade",
                "Fechar a torneira enquanto escova",
                "Usar água quente"
            ],
            correct: 2,
            explanation: "Fechar a torneira durante a escovação pode economizar até 12 litros de água por escovação."
        },
        {
            category: "Água Potável",
            question: "O que torna a água potável?",
            options: [
                "Ser transparente",
                "Não ter cheiro",
                "Passar por tratamento adequado",
                "Vir de poço artesiano"
            ],
            correct: 2,
            explanation: "Água potável é aquela que passou por tratamento adequado, eliminando microrganismos e substâncias nocivas à saúde."
        },
        {
            category: "Meio Ambiente",
            question: "Qual é o principal problema causado pela falta de saneamento?",
            options: [
                "Aumento da conta de luz",
                "Poluição da água e doenças",
                "Diminuição da chuva",
                "Aquecimento global"
            ],
            correct: 1,
            explanation: "A falta de saneamento causa poluição das águas e proliferação de doenças como diarreia, cólera e hepatite."
        },
        {
            category: "Uso Doméstico",
            question: "Quantos litros de água são gastos em uma descarga do vaso sanitário?",
            options: [
                "2 a 4 litros",
                "6 a 12 litros",
                "15 a 20 litros",
                "25 a 30 litros"
            ],
            correct: 1,
            explanation: "Vasos sanitários modernos com caixa acoplada consomem entre 6 a 12 litros por descarga, dependendo do modelo."
        },
        {
            category: "Higiene",
            question: "Por que é importante lavar as mãos?",
            options: [
                "Para economizar sabão",
                "Para prevenir doenças",
                "Para gastar água",
                "Para deixar as mãos macias"
            ],
            correct: 1,
            explanation: "Lavar as mãos é fundamental para prevenir a transmissão de doenças causadas por vírus, bactérias e outros microrganismos."
        },
        {
            category: "Água no Mundo",
            question: "Qual porcentagem da água do planeta é doce e disponível para consumo?",
            options: [
                "Menos de 1%",
                "5%",
                "15%",
                "25%"
            ],
            correct: 0,
            explanation: "Apenas cerca de 2,5% da água do planeta é doce, e menos de 1% está disponível para consumo humano."
        },
        {
            category: "Doenças",
            question: "Qual doença está diretamente relacionada à água contaminada?",
            options: [
                "Gripe",
                "Diarreia",
                "Dor de cabeça",
                "Febre"
            ],
            correct: 1,
            explanation: "Diarreia é uma das principais doenças causadas pelo consumo de água contaminada ou falta de saneamento adequado."
        },
        {
            category: "Tratamento",
            question: "Qual é o primeiro passo no tratamento da água?",
            options: [
                "Adicionar cloro",
                "Filtrar",
                "Captar a água bruta",
                "Fluoretação"
            ],
            correct: 2,
            explanation: "O primeiro passo é a captação da água bruta de rios, lagos ou poços, seguida pelos processos de tratamento."
        },
        {
            category: "Sustentabilidade",
            question: "O que é água de reúso?",
            options: [
                "Água que já foi usada uma vez",
                "Água tratada para novo uso",
                "Água da chuva",
                "Água de poço"
            ],
            correct: 1,
            explanation: "Água de reúso é água residual tratada que pode ser utilizada novamente para fins não potáveis, como irrigação e limpeza."
        },
        {
            category: "Recursos Hídricos",
            question: "Qual é a maior reserva de água doce do Brasil?",
            options: [
                "Rio Amazonas",
                "Aquífero Guarani",
                "Rio São Francisco",
                "Pantanal"
            ],
            correct: 1,
            explanation: "O Aquífero Guarani é uma das maiores reservas de água doce subterrânea do mundo, estendendo-se por Brasil, Argentina, Paraguai e Uruguai."
        }
    ],

    medio: [
        {
            category: "Processos de Tratamento",
            question: "Qual processo remove partículas em suspensão na água durante o tratamento?",
            options: [
                "Coagulação e floculação",
                "Desinfecção",
                "Fluoretação",
                "Correção de pH"
            ],
            correct: 0,
            explanation: "A coagulação e floculação são processos que agrupam partículas pequenas em flocos maiores, facilitando sua remoção por sedimentação e filtração."
        },
        {
            category: "Indicadores de Qualidade",
            question: "O que mede o parâmetro DBO (Demanda Bioquímica de Oxigênio)?",
            options: [
                "A quantidade de oxigênio dissolvido",
                "A quantidade de oxigênio consumido por microrganismos",
                "A temperatura da água",
                "O pH da água"
            ],
            correct: 1,
            explanation: "DBO mede a quantidade de oxigênio que os microrganismos consomem para decompor matéria orgânica presente na água."
        },
        {
            category: "Marco Legal",
            question: "Em que ano foi aprovado o Marco Legal do Saneamento Básico no Brasil?",
            options: [
                "2007",
                "2015",
                "2020",
                "2022"
            ],
            correct: 2,
            explanation: "O novo Marco Legal do Saneamento foi aprovado em 2020 (Lei 14.026/2020), atualizando a Lei do Saneamento de 2007."
        },
        {
            category: "Tecnologias Sustentáveis",
            question: "O que são jardins de chuva (rain gardens)?",
            options: [
                "Jardins que só crescem na chuva",
                "Sistemas de captação e infiltração de água pluvial",
                "Jardins em estufas",
                "Irrigação por gotejamento"
            ],
            correct: 1,
            explanation: "Jardins de chuva são sistemas paisagísticos que captam, tratam e infiltram água da chuva, reduzindo o escoamento superficial."
        },
        {
            category: "Química da Água",
            question: "Qual é o valor ideal de pH para água potável?",
            options: [
                "5,0 a 6,0",
                "6,0 a 9,5",
                "10,0 a 12,0",
                "1,0 a 3,0"
            ],
            correct: 1,
            explanation: "O pH ideal para água potável está entre 6,0 e 9,5, conforme estabelecido pela Portaria de Potabilidade do Ministério da Saúde."
        },
        {
            category: "Gestão de Recursos Hídricos",
            question: "O que são Comitês de Bacia Hidrográfica?",
            options: [
                "Órgãos técnicos de construção de barragens",
                "Colegiados participativos de gestão da água",
                "Empresas de tratamento de água",
                "Laboratórios de análise da água"
            ],
            correct: 1,
            explanation: "Comitês de Bacia são colegiados participativos com representantes do poder público, usuários e sociedade civil para gestão integrada dos recursos hídricos."
        },
        {
            category: "Efluentes",
            question: "Qual é o objetivo principal do tratamento de esgoto?",
            options: [
                "Eliminar o cheiro",
                "Remover poluentes e patógenos",
                "Clarear a água",
                "Reduzir o volume"
            ],
            correct: 1,
            explanation: "O tratamento de esgoto visa remover poluentes orgânicos, nutrientes e microrganismos patogênicos antes do descarte no meio ambiente."
        },
        {
            category: "Microbiologia",
            question: "Qual microrganismo é usado como indicador de contaminação fecal?",
            options: [
                "Salmonella",
                "Escherichia coli",
                "Staphylococcus",
                "Streptococcus"
            ],
            correct: 1,
            explanation: "Escherichia coli é amplamente utilizada como indicador de contaminação fecal devido à sua presença no intestino humano e resistência no ambiente."
        },
        {
            category: "Tipos de Esgoto",
            question: "O que são águas cinzas?",
            options: [
                "Águas de chuva contaminadas",
                "Efluentes de pias, chuveiros e máquinas de lavar",
                "Águas de vaso sanitário",
                "Águas industriais"
            ],
            correct: 1,
            explanation: "Águas cinzas são efluentes domésticos que não contêm dejetos, vindos de pias, chuveiros e máquinas de lavar, com potencial de reúso."
        },
        {
            category: "Sistemas de Tratamento",
            question: "Qual sistema é mais adequado para pequenas comunidades rurais?",
            options: [
                "Estação de tratamento convencional",
                "Fossa séptica seguida de filtro anaeróbio",
                "Lagoas de estabilização",
                "Lodos ativados"
            ],
            correct: 1,
            explanation: "Sistemas de fossa séptica seguida de filtro anaeróbio são adequados para pequenas comunidades por serem simples, econômicos e eficientes."
        },
        {
            category: "Gestão Urbana",
            question: "O que causa o fenômeno de ilhas de calor urbanas relacionado à água?",
            options: [
                "Excesso de chuva",
                "Impermeabilização do solo",
                "Muitas piscinas",
                "Rios poluídos"
            ],
            correct: 1,
            explanation: "A impermeabilização reduz a evapotranspiração e infiltração, diminuindo o resfriamento natural e contribuindo para as ilhas de calor."
        },
        {
            category: "Análises Laboratoriais",
            question: "O que indica alta turbidez na água?",
            options: [
                "Presença de sais dissolvidos",
                "Presença de partículas em suspensão",
                "Alta temperatura",
                "Baixo pH"
            ],
            correct: 1,
            explanation: "Turbidez alta indica presença de partículas em suspensão como argila, algas, matéria orgânica, que reduzem a transparência da água."
        },
        {
            category: "Instrumentos de Gestão",
            question: "O que é a outorga de uso da água?",
            options: [
                "Permissão para consumir água encanada",
                "Autorização para captar água de fontes naturais",
                "Licença para construir poços",
                "Certificado de qualidade da água"
            ],
            correct: 1,
            explanation: "Outorga é o instrumento legal que autoriza o uso de recursos hídricos, controlando quantidade e qualidade da água captada."
        },
        {
            category: "Poluição Hídrica",
            question: "Qual é a principal fonte de poluição difusa em áreas urbanas?",
            options: [
                "Indústrias",
                "Escoamento superficial urbano",
                "Esgoto doméstico",
                "Aterros sanitários"
            ],
            correct: 1,
            explanation: "O escoamento superficial urbano carrega poluentes dispersos pela cidade como óleos, metais pesados, sedimentos e resíduos orgânicos."
        },
        {
            category: "Ecossistemas Aquáticos",
            question: "Qual processo natural ajuda na autopurificação dos rios?",
            options: [
                "Sedimentação",
                "Atividade microbiana aeróbica",
                "Diluição",
                "Todas as alternativas"
            ],
            correct: 3,
            explanation: "A autopurificação envolve sedimentação de sólidos, atividade microbiana para degradar matéria orgânica e diluição dos poluentes."
        }
    ],

    dificil: [
        {
            category: "Engenharia Sanitária",
            question: "Qual é o princípio de funcionamento do processo de lodos ativados?",
            options: [
                "Sedimentação por gravidade",
                "Oxidação biológica aeróbica com recirculação de biomassa",
                "Filtração através de membranas",
                "Adsorção em carvão ativado"
            ],
            correct: 1,
            explanation: "Lodos ativados utilizam microrganismos aeróbicos em suspensão para degradar matéria orgânica, com recirculação da biomassa para manter concentração adequada."
        },
        {
            category: "Modelagem Matemática",
            question: "Na equação de Streeter-Phelps, o que representa o coeficiente K1?",
            options: [
                "Taxa de reaeração atmosférica",
                "Taxa de desoxigenação ou consumo de OD",
                "Concentração de saturação de oxigênio",
                "Velocidade do rio"
            ],
            correct: 1,
            explanation: "K1 é o coeficiente de desoxigenação, representando a taxa de consumo de oxigênio dissolvido pela decomposição da matéria orgânica."
        },
        {
            category: "Processos Avançados",
            question: "Qual tecnologia é mais eficiente para remoção de micropoluentes emergentes?",
            options: [
                "Tratamento convencional com cloro",
                "Processos oxidativos avançados (POA)",
                "Sedimentação simples",
                "Filtração lenta"
            ],
            correct: 1,
            explanation: "POAs como ozonização, UV/H2O2 e fotocatálise são eficientes na degradação de micropoluentes como fármacos e pesticidas."
        },
        {
            category: "Hidrologia Urbana",
            question: "O que é o tempo de concentração em uma bacia hidrográfica urbana?",
            options: [
                "Tempo de residência hidráulica",
                "Tempo para a água viajar do ponto mais distante ao exutório",
                "Tempo de evaporação",
                "Tempo de infiltração"
            ],
            correct: 1,
            explanation: "Tempo de concentração é o período necessário para que a água precipitada no ponto mais distante da bacia chegue ao ponto de controle (exutório)."
        },
        {
            category: "Microbiologia Aplicada",
            question: "Qual processo de desinfecção tem maior potencial de formação de subprodutos halogenados?",
            options: [
                "Ozonização",
                "Radiação UV",
                "Cloração",
                "Ultrassom"
            ],
            correct: 2,
            explanation: "A cloração pode formar trihalometanos (THMs) e ácidos haloacéticos ao reagir com matéria orgânica natural, sendo subprodutos potencialmente carcinogênicos."
        },
        {
            category: "Remoção de Nutrientes",
            question: "No processo de remoção biológica de fósforo, qual é a função da zona anaeróbica?",
            options: [
                "Oxidar o fósforo",
                "Promover liberação de fósforo por bactérias acumuladoras",
                "Precipitar fosfatos",
                "Filtrar o fósforo"
            ],
            correct: 1,
            explanation: "Na zona anaeróbica, bactérias acumuladoras de fósforo (PAO) liberam fósforo armazenado e captam ácidos graxos voláteis, preparando-se para captação excessiva na zona aeróbica."
        },
        {
            category: "Tratamento de Efluentes Industriais",
            question: "Qual processo é mais adequado para remoção de metais pesados?",
            options: [
                "Biodegradação",
                "Precipitação química e coagulação",
                "Digestão anaeróbica",
                "Nitrificação"
            ],
            correct: 1,
            explanation: "Precipitação química seguida de coagulação/floculação é eficiente para remoção de metais pesados, convertendo-os em formas insolúveis."
        },
        {
            category: "Modelagem de Qualidade",
            question: "O que representa o número de Peclet em sistemas de tratamento?",
            options: [
                "Razão entre transporte advectivo e dispersivo",
                "Eficiência de remoção",
                "Taxa de crescimento microbiano",
                "Concentração de entrada"
            ],
            correct: 0,
            explanation: "Número de Peclet relaciona transporte advectivo (fluxo) com transporte dispersivo, indicando o grau de mistura em reatores."
        },
        {
            category: "Sistemas de Membranas",
            question: "Qual é a principal limitação operacional em sistemas de osmose reversa?",
            options: [
                "Baixa pressão de operação",
                "Fouling e scaling das membranas",
                "Alta temperatura",
                "Baixo pH"
            ],
            correct: 1,
            explanation: "Fouling (entupimento biológico/orgânico) e scaling (incrustação mineral) são os principais problemas que reduzem eficiência e vida útil das membranas."
        },
        {
            category: "Digestão Anaeróbica",
            question: "Qual é a faixa ótima de pH para metanogênese?",
            options: [
                "5,0 - 6,0",
                "6,8 - 7,2",
                "8,0 - 9,0",
                "9,5 - 10,5"
            ],
            correct: 1,
            explanation: "Arqueias metanogênicas são sensíveis ao pH, sendo a faixa de 6,8 a 7,2 ótima para produção estável de metano na digestão anaeróbica."
        },
        {
            category: "Tratamento Natural",
            question: "Em wetlands construídos, qual é a função das plantas macrófitas?",
            options: [
                "Apenas decoração",
                "Transferência de oxigênio, filtração e suporte para biofilme",
                "Consumir toda a matéria orgânica",
                "Produzir metano"
            ],
            correct: 1,
            explanation: "Macrófitas transferem oxigênio pelas raízes, filtram mecanicamente, fornecem superfície para crescimento de biofilme e absorvem nutrientes."
        },
        {
            category: "Cinética de Reações",
            question: "Na cinética de primeira ordem para decaimento de poluentes, o que representa a constante k?",
            options: [
                "Concentração inicial",
                "Taxa específica de decaimento",
                "Tempo de residência",
                "Concentração final"
            ],
            correct: 1,
            explanation: "A constante k representa a taxa específica de decaimento, indicando a velocidade com que o poluente é removido por unidade de concentração."
        },
        {
            category: "Processos Físico-Químicos",
            question: "Qual mecanismo predomina na remoção de coloides por coagulação?",
            options: [
                "Sedimentação gravitacional",
                "Neutralização de cargas e agregação",
                "Evaporação",
                "Oxidação química"
            ],
            correct: 1,
            explanation: "Coagulantes neutralizam cargas negativas dos coloides, permitindo agregação por forças de van der Waals e formação de flocos sedimentáveis."
        },
        {
            category: "Gestão Integrada",
            question: "No conceito de Pegada Hídrica, o que representa a 'água azul'?",
            options: [
                "Água de chuva armazenada no solo",
                "Água doce superficial e subterrânea consumida",
                "Volume de água necessário para diluir poluentes",
                "Água do mar"
            ],
            correct: 1,
            explanation: "Água azul refere-se ao consumo de água doce superficial (rios, lagos) e subterrânea (aquíferos) na pegada hídrica de produtos e serviços."
        },
        {
            category: "Biotecnologia Ambiental",
            question: "Qual é o princípio da bioaumentação em tratamento de efluentes?",
            options: [
                "Aumentar temperatura do sistema",
                "Adicionar microrganismos específicos selecionados",
                "Aumentar tempo de detenção",
                "Adicionar mais oxigênio"
            ],
            correct: 1,
            explanation: "Bioaumentação envolve inoculação de microrganismos específicos com capacidades metabólicas especiais para degradar poluentes recalcitrantes."
        },
        {
            category: "Gestão Avançada",
            question: "O que caracteriza um sistema de gestão adaptativa de recursos hídricos?",
            options: [
                "Uso de protocolos fixos e imutáveis",
                "Monitoramento contínuo com ajustes baseados em aprendizado",
                "Aplicação de uma única tecnologia",
                "Gestão centralizada sem participação social"
            ],
            correct: 1,
            explanation: "Gestão adaptativa incorpora monitoramento contínuo, avaliação de resultados e ajustes estratégicos baseados em aprendizado e feedback dos stakeholders."
        }
    ]
};

// Função para embaralhar questões (caso necessário)
function shuffleQuestions(questions) {
    const shuffled = [...questions];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// Função para obter questões por categoria
function getQuestionsByCategory(difficulty, category) {
    if (!window.QuizQuestions[difficulty]) {
        return [];
    }
    
    return window.QuizQuestions[difficulty].filter(question => 
        question.category === category
    );
}

// Função para obter todas as categorias de uma dificuldade
function getCategories(difficulty) {
    if (!window.QuizQuestions[difficulty]) {
        return [];
    }
    
    const categories = [...new Set(
        window.QuizQuestions[difficulty].map(question => question.category)
    )];
    
    return categories.sort();
}

// Função para validar estrutura das questões
function validateQuestions() {
    const difficulties = Object.keys(window.QuizQuestions);
    const requiredFields = ['category', 'question', 'options', 'correct', 'explanation'];
    
    difficulties.forEach(difficulty => {
        const questions = window.QuizQuestions[difficulty];
        
        questions.forEach((question, index) => {
            // Verificar campos obrigatórios
            requiredFields.forEach(field => {
                if (!question[field]) {
                    console.error(`Question ${index} in ${difficulty}: Missing field '${field}'`);
                }
            });
            
            // Verificar se tem 4 opções
            if (!Array.isArray(question.options) || question.options.length !== 4) {
                console.error(`Question ${index} in ${difficulty}: Must have exactly 4 options`);
            }
            
            // Verificar se correct está no range válido
            if (typeof question.correct !== 'number' || question.correct < 0 || question.correct > 3) {
                console.error(`Question ${index} in ${difficulty}: 'correct' must be 0, 1, 2, or 3`);
            }
        });
    });
}

// Estatísticas das questões
function getQuizStats() {
    const stats = {};
    
    Object.keys(window.QuizQuestions).forEach(difficulty => {
        const questions = window.QuizQuestions[difficulty];
        const categories = getCategories(difficulty);
        
        stats[difficulty] = {
            totalQuestions: questions.length,
            categories: categories.length,
            categoryBreakdown: {}
        };
        
        categories.forEach(category => {
            stats[difficulty].categoryBreakdown[category] = 
                getQuestionsByCategory(difficulty, category).length;
        });
    });
    
    return stats;
}

// Exportar funções utilitárias
window.QuizQuestionUtils = {
    shuffleQuestions,
    getQuestionsByCategory,
    getCategories,
    validateQuestions,
    getQuizStats
};

// Validar questões ao carregar
document.addEventListener('DOMContentLoaded', function() {
    validateQuestions();
    console.log('Quiz Questions loaded:', getQuizStats());
});
